{% extends 'base.html' %}

{% block title %}{{item.text}} - {{ item.pub_by }}{% endblock title %}

{% block content %}
{% load humanize %}
{% if item %}
    {% if item.crossed_off %}
        <h1 style="text-decoration: line-through;">{{item}}</h1>
    {% else %}
        <h1>{{item}}</h1>
    {% endif %}
        <p>Cost:   ${{item.cost|floatformat:"2"|intcomma}}</p>
        <p>Days:   {{item.time}}</p>
        <p>Hours: {{item.hours}}</p>
        <p>Added By:   <a href='/bucketlist/userstats/{{item.pub_by}}/'>{{item.pub_by}}</a></p>
        {% load avatar_tags %}
        {% avatar item.pub_by %}
        <p>Date Added:   {{item.pub_date}}</p>
        <br>
        <hr>
        <hr>
        <br>
        <h2>Comments:</h2>
        <br>
        {% if comments %}
            {% for comment in comments %}
                <div>
                    <h3>{{comment.author}}</h3>
                    {% avatar comment.author 30 %}
                    <h5>{{comment.created}}</h3>
                    <p>{{comment.body}}</h3>
                    {% if comment.author == current_user %}
                        <button><a href="/bucketlist/item/{{comment.id}}/delete-comment/">Remove Comment</a></button>
                    {% endif %}
                </div>
                <hr>
            {% endfor %}
        {% else %}
            <p>There are no comments yet.  Be the first to add one!</p>
        {% endif %}
        <h5>Leave a Comment Here</h5>
        <form action="/bucketlist/item/{{id}}/" method = "post">
            {% csrf_token %}
            {% for field in form %}
                {{ field.label }}
                {{ field }}
                <br>
            {% endfor %}
            <input type = "submit" value = "Submit">
        </form>
{% else %}
    <p>There seems to have been an error.</p>
{% endif %}
{% endblock content %}